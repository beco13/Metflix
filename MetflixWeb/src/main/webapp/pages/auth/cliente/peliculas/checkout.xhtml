<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	>
	
	<ui:composition template="/templates/template_root.xhtml">
		<ui:define name="title">
			Checkout Â· Metflix
		</ui:define>
		<ui:define name="content">
		
			<h2 class="text-center">
				Checkout - Confirmar Compra
			</h2>
			
			<br />
			<br />
		    
		    <div class="container">
		    	<div class="row">
				<div class="col-md">
					<table class="table">
						<thead>
							<tr>
								<th>#</th>
								<th>
									#{translator['pelicula.titulo']}
								</th>
								<th>
									Cantidad
								</th>
								<th>
									#{translator['generalTabla.opciones']}
								</th>
								
							</tr>
						</thead>
						<tbody>
	
							<ui:repeat var="item" varStatus="status" value="#{carritoComprasBean.items}">
	
								<tr>
									<td>#{item.pelicula.id}</td>
									<td>#{item.pelicula.titulo}</td>
									<td>#{item.cantidad}</td>
									<td>
										<form jsf:id="formAumentarItemCarrito" style="display: inline;">
									 		<button type="submit" class="btn btn-light" jsf:action='#{carritoComprasBean.ajustarCantidadItem(item.pelicula.id,"+")}'  >
									 			<i class="fa fa-plus" aria-hidden="true"></i>
									 		</button>
									 	</form>
										
										<form jsf:id="formDisminuirItemCarrito" style="display: inline;">
									 		<button type="submit" class="btn btn-light" jsf:action='#{carritoComprasBean.ajustarCantidadItem(item.pelicula.id,"-")}'  >
									 			<i class="fa fa-minus" aria-hidden="true"></i>
									 		</button>
									 	</form>
									 	
										<form jsf:id="formQuitarItemCarrito" style="display: inline;">
									 		<button type="submit" class="btn btn-danger" jsf:action='#{carritoComprasBean.eliminarItem(item.pelicula.id)}' onclick="if (! confirm('Realmente deseas eliminar el registro?')) return false" >
									 			<i class="fa fa-trash" aria-hidden="true"></i>
									 		</button>
									 	</form>
									</td>
								</tr>
							</ui:repeat>
	
						</tbody>
					</table>
					
					<form jsf:id="formProcesarCompra" style="display: inline;" class="text-center">
				 		<button type="submit" class="btn btn-success" jsf:action='#{carritoComprasBean.registrarCompra(authBean.user.id)}'  >
				 			Registrar compra <i class="fa fa-credit-card" aria-hidden="true"></i>
				 		</button>
				 	</form>
					
				</div>
			</div>
	    
		    </div>
			
		</ui:define>
	</ui:composition>
</html>
